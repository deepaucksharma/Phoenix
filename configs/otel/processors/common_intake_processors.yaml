# Common Intake Processors for Phoenix
# Shared across all pipelines for consistent processing

processors:
  # Memory limiter prevents OOM by checking memory usage
  memory_limiter:
    check_interval: 1s
    limit_percentage: 75
    spike_limit_percentage: 30
    
  # Batch processor for efficiency
  batch:
    timeout: 30s
    send_batch_size: 10000
    send_batch_max_size: 15000
    
  # Resource detection adds cloud/k8s metadata
  resource:
    detectors: [env, system]
    timeout: 5s
    override: false
    
  # Resource processor adds custom attributes
  resource/add_keys:
    attributes:
      - key: service.name
        value: phoenix
        action: insert
      - key: service.version
        value: "1.0.0"
        action: insert
      - key: deployment.environment
        from_attribute: ENVIRONMENT
        action: insert