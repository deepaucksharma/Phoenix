# Phoenix Prometheus Configuration
global:
  scrape_interval: 15s
  evaluation_interval: 30s

# Rule files
rule_files:
  - "/etc/prometheus/rules/*.yml"

scrape_configs:
  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Main collector metrics
  - job_name: 'otelcol-main'
    static_configs:
      - targets: ['otelcol-main:8888']
        labels:
          pipeline: 'full_fidelity'
      - targets: ['otelcol-main:8889']
        labels:
          pipeline: 'optimized'
      - targets: ['otelcol-main:8890']
        labels:
          pipeline: 'experimental_topk'
      - targets: ['otelcol-main:8891']
        labels:
          component: 'observatory'

  # Observer collector metrics
  - job_name: 'otelcol-observer'
    static_configs:
      - targets: ['otelcol-observer:9888']
        labels:
          component: 'observer'

  # Control plane services
  - job_name: 'control-actuator'
    static_configs:
      - targets: ['control-actuator-go:8081']
        labels:
          component: 'control_actuator'

  - job_name: 'anomaly-detector'
    static_configs:
      - targets: ['anomaly-detector:8082']
        labels:
          component: 'anomaly_detector'

  - job_name: 'benchmark-controller'
    static_configs:
      - targets: ['benchmark:8083']
        labels:
          component: 'benchmark'

  # Monitoring stack
  - job_name: 'grafana'
    static_configs:
      - targets: ['grafana:3000']
        labels:
          component: 'grafana'